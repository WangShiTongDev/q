@using DevTeamUp.BLL.DTOs;
@using DevTeamUp.DAL.EF.Entities;


@model ProfilePageDTO

<div class="container p-5 white-bg">
    <div class="row mb-3" style="background-color: #F2F5F8; padding: 25px; border-radius: 0.7rem;">
        @*<div class="col-4">
            <div class="img-box avatar" >
                <img src="https://w7.pngwing.com/pngs/340/946/png-transparent-avatar-user-computer-icons-software-developer-avatar-child-face-heroes.png" alt="" />
            </div>
        </div>
        <div class="col-8 ">
            <div>
                <div>Username: @Model.FirstName @Model.LastName</div>
                <div>rating: ****</div>
                <div>
                    GitHub: sdafljdfasklasdf 
                </div>
                <div>
                    Consectetur adipiscing elit fusce vel.
                </div>
                <div>
                    <a href="" class="btn btn-info">edit</a>
                </div>
            </div>
        </div>*@
        <div class="col">
            <h1> @Model.FirstName @Model.LastName</h1>
            
            <p>
                @Model.Bio
            </p>
           
            <div class="d-flex justify-content-between">
                <a href="@Model.GitHubLink">GitHub</a>
                @if(Model.IsProfileOwner){

                    <a asp-action="ProfileInit" asp-controller="Profile">Редагувати профіль</a>
                }
            </div>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
          
            <ul class="skills">
                @foreach (var skill in Model.Skills)
                {
                    <li class="skill-item">@skill.Name</li>
                }
               
            </ul>
        </div>
    </div>
    
    <div class="row mb-5">
        <div class="col">
            <div class="about">
                <p>
                    @Model.About
                </p>
            </div>

        </div>
    </div>
   
    <div class="row">
        <div class="col">
            <div>
                <div class="mb-2 d-flex justify-content-between pb-1 border-bottom border-3">
                    <h4 class="">Проекти</h4>
                    @if (Model.IsProfileOwner)
                    {
                        <a class="btn btn-success " asp-action="CreateProject" asp-controller="Project">Створити проект</a>
                        
                    }
                </div>
                <div class="profile-projects">
                    @foreach (var project in Model.Projects)
                    {
                        <a href="/Project/@project.Id" class="text-decoration-none text-black">
                            <div class="project-list-item card mb-4 box-shadow position-relative ">

                            <div class="card-body">
                                <h5 class="card-title">@project.Name</h5>
                                <div>
                                    <ul class="project-skills">
                                        @foreach (var skill in project.Stack)
                                        {
                                            <li class="project-skill-item">@skill.Name</li>
                                        }
                                       
                                    </ul>
                                </div>
                                <div class="card-subtitle">
                                   @project.ShortDescription
                                </div>
                                <div class="d-flex justify-content-between align-items-center">

                                   
                                </div>
                            </div>
                        </div>
                        </a>
                    }
                   @* @for (int i = 0; i < 0; i++)
                    {
                        <div class="project-list-item card mb-4 box-shadow position-relative ">

                            <div class="card-body">
                                <h5 class="card-title">Title</h5>
                                <div>
                                    <ul class="project-skills">
                                        @for (int j = 0; j < 5; j++)
                                        {
                                            <li class="project-skill-item">Skill name</li>
                                        }
                                    </ul>
                                </div>
                                <div class="card-subtitle">
                                    Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.
                                </div>
                                <div class="d-flex justify-content-between align-items-center">

                                    <small class="status-project">find team</small>
                                    <small class="members-counter">1/4</small>
                                </div>
                            </div>
                        </div>
                    }*@
                   @* @for (int i = 0; i < 0; i++)
                    {
                        

                        <div class="card mb-4 box-shadow position-relative ">
                            <img class="card-img-top" src="https://letsenhance.io/static/8f5e523ee6b2479e26ecc91b9c25261e/1015f/MainAfter.jpg" data-src="holder.js/100px225?theme=thumb&amp;bg=55595c&amp;fg=eceeef&amp;text=Thumbnail" alt="Thumbnail [100%x225]" style="height: 225px; width: 100%; display: block;" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22348%22%20height%3D%22225%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20348%20225%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_18ebc89e27d%20text%20%7B%20fill%3A%23eceeef%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A17pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_18ebc89e27d%22%3E%3Crect%20width%3D%22348%22%20height%3D%22225%22%20fill%3D%22%2355595c%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22116.71283340454102%22%20y%3D%22120.13639469146729%22%3EThumbnail%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" data-holder-rendered="true">
                            <div class="card-body">
                                <h5 class="card-title">Title</h5>
                              
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="btn-group">
                                        <a asp-action="About" asp-route-id="1" class="btn btn-sm btn-outline-secondary">View</a>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Edit</button>
                                        <button type="button" class="btn btn-sm btn-outline-secondary">Delete</button>
                                    </div>
                                    <small class="text-muted">9 mins</small>
                                </div>
                            </div>
                         
                        </div>
                    }*@
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            

            <div>
                
                <h4 class="border-bottom border-3 pb-2">Відгуки</h4>
                <div class="container">
                    @foreach(var item in Model.Reviews)
                    {
                    <div class="row mb-4 pb-2 border-bottom">
                        <div class="col-9">
                            
                            <div class="review-details">
                                
                                <div class="review-description ">
                                    @item.Description
                                </div>
                            </div>
                        </div>
                        <div class="col-3 border-start ">
                            @item.CreatedAt.ToString()
                        </div>
                    </div>
                        
                    }
                </div>
            </div>
            <div>
                @if (Model.IsProfileOwner)
                {
                    <div class="mb-2 d-flex justify-content-between pb-1 border-bottom border-3">
                        <h4>Заявки на вступ</h4>

                    </div>
                    
                    @foreach (var item in (ViewBag.MembershipApplications as IList<ProjectApplication>))
                    {
                    <div class="card ">
                        <div class="d-flex justify-content-between card-header">
                            <div class="">
                                <a href="/Project/@item.ProjectId" class="me-1">Проект: @item.Project.Name</a>
                                <a href="@("/Profile?uId=" + @item.AuthorId)">Користувач: @item.Author.FirstName @item.Author.LastName</a>
                            </div>
                            <div class="btn-group">
                                <a href="Profile/JoinResult?reqId=@item.Id&status=true" class="btn btn-success">Прийняти</a>
                                <a href="Profile/JoinResult?reqId=@item.Id&status=false" class="btn btn-danger">Відхилити</a>
                            </div>
                        </div>
                        <div class="card-body">
                                <p>@item.Message</p>
                        </div>
                    </div>
                    }
                }
                @if (!Model.IsProfileOwner && (bool)ViewBag.isCollaborator )
                {
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Коментар</h3>
                        </div>
                        <div class="card-body">
                            <form asp-action="CreateReview" asp-controller="Profile" method="post">
                                <textarea class="form-control" name="Description"></textarea>
                                <input type="hidden" value="@Model.Id" name="ProfileId" />
                                <input class="btn btn-primary mt-2 w-100" type="submit" value="Надіслати" />
                            </form>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>